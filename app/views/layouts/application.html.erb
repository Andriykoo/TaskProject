<!DOCTYPE html>
<html>
<head>
  <title>TestProject</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= stylesheet_link_tag "bootstrap.min.css" %>
  <%= stylesheet_link_tag "main.css" %>
  <script>
      $(document).ready(function(){
          $(".sharebutton").on("click", function(event){
              if ( $(this).next().hasClass('shareform-form') ){
                  $(this).next().slideUp(300);
                  var self = $(this);
                  setTimeout( function(){ self.next().remove() }, 300 );
                  return false;
              }
              var target = $(this).attr('href'),
              // waiting_image = $('.gif-class'),
                      form_after = $(this);
              $.ajax({
                  url: target,
                  beforeSend: function(){
                      // waiting_image.fadeIn(300);
                  },
                  success: function(response){
                      var form = $($.parseHTML(response)).find("#shareform");
                      form_after.after('<div class="shareform-form"></div>');
                      form_after.next().hide().append(form);
                      form_after.next().slideDown(300);
                      // waiting_image.fadeOut(300);
                  },
                  error: function(){
                      // waiting_image.fadeOut(300);
                  },
              });
              event.preventDefault();
          });
      });
  </script>
  <%= csrf_meta_tags %>
</head>

<body>
    <header >
      <nav id="mainNav" class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand page-scroll" href="#page-top">Tasks Project</a>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
              <li>
                <%= link_to 'Tasks', task_show_path, {:class=>"page-scroll"}%>
              </li>
              <li>
                <a class="page-scroll" href="#contact">Contact </a>
              </li>
              <li>
                <%= link_to 'Users', user_show_path, {:class=>"page-scroll"}%>
              </li>
              <%= render partial: "layouts/loginPartial" %>
            </ul>
          </div>
          <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
      </nav>
    </header>

    <div class="body">
      <% flash.each do |key, value| %>
      <div class="<%= flash_class(key) %>">
        <%= value %>
      </div>
      <% end %>
      <div class="container">
        <%= yield %>
      </div>
    </div>
</body>

</html>
